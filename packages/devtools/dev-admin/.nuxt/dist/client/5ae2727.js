(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{787:function(t,e,r){"use strict";var o;r.d(e,"a",(function(){return o})),function(t){t[t.draft=1]="draft",t[t.published=2]="published"}(o||(o={}))},788:function(t,e,r){"use strict";r.d(e,"c",(function(){return table})),r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return l}));var o=r(787),table={columns:[{title:"article.column.title",align:"left",dataIndex:"title",scopedSlots:{customRender:"titles"}},{title:"article.column.summary",dataIndex:"summary",align:"left",scopedSlots:{customRender:"summary"}},{title:"article.column.status",dataIndex:"status",align:"left",scopedSlots:{customRender:"status"}},{title:"article.column.views",align:"left",dataIndex:"views",needTotal:!0},{title:"article.column.createTime",align:"left",dataIndex:"createTime",width:"250px",scopedSlots:{customRender:"createTime"}},{title:"article.column.actions",dataIndex:"actions",align:"left",fixed:"right",width:"250px",scopedSlots:{customRender:"actions"}}]},n={statusFilter:function(t,e){return e("article.status.".concat(o.a[t]))},statusTypeFilter:function(t){var e;return function(t){t[t.error=o.a.draft]="error",t[t.success=o.a.published]="success"}(e||(e={})),e[t]}},l={bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!1,mark:!0,superscript:!1,subscript:!1,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0,fullscreen:!1,readmodel:!1,help:!0,undo:!0,redo:!0,trash:!0,save:!0,navigation:!0,subfield:!0,preview:!0,htmlcode:!0}},790:function(t,e){},793:function(t,e,r){},800:function(t,e,r){"use strict";r(793)},801:function(t,e,r){"use strict";var o=r(790),n=r.n(o);e.default=n.a},809:function(t,e,r){"use strict";r.r(e);var o=r(798),n=r(50),l=r(788);r(799);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var m={name:"ArticleCreate",components:{MavonEditor:o.mavonEditor},data:function(){return{isSync:0,isComment:0,isMove:0,markdownOption:l.b,content:"",previewVisible:!1,previewImage:"",fileList:[],dynamicTags:[],tagsSize:5,weightValue:1,categoryList:[],id:null,drawerVisible:!1,form:this.$form.createForm(this,{name:"create_article"})}},created:function(){this.getTagsList(),this.getCategoryList()},methods:{beforeUpload:function(t){var e="image/jpeg"===t.type;e||this.$message.error("You can only upload JPG file!");var r=t.size/1024/1024<2;return r||this.$message.error("Image must smaller than 2MB!"),e&&r},$imgAdd:function(t,e){(new FormData).append("file",e)},onClose:function(){this.resetForm(),this.drawerVisible=!1,this.$emit("resetData",!1)},resetForm:function(){this.content="",this.form.resetFields()},getTagsList:function(){var t=this;n.f.getList().then((function(e){t.dynamicTags=e}))},getCategoryList:function(){var t=this;n.c.getList().then((function(e){t.categoryList=e}))},handleCancel:function(){this.previewVisible=!1},handlePreview:function(t){this.previewImage=t.url||t.thumbUrl,this.previewVisible=!0},handleChange:function(t){var e=t.fileList;console.log(e),this.fileList=e},handleSelectChange:function(t){console.log("Selected: ".concat(t))},handleSubmit:function(){var t=this;this.form.validateFieldsAndScroll((function(e,r){if(!e&&null!==t.content){console.log("Received values of form: ",r);var o=function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){d(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},r),l=[];void 0!==o.tagsList&&o.tagsList.forEach((function(e,r){t.dynamicTags.forEach((function(t){t.id===Number(e)&&(l[r]=t)}))})),o.tagsList=[].concat(l),o.status=2,o.content=t.content,void 0!==o.thumbnail&&null!==o.thumbnail&&null!==o.thumbnail.file&&void 0!==o.thumbnail.file&&(o.thumbnail=o.thumbnail.file.response.extra),n.a.create(o).then((function(e){t.$notification.success({message:e.message}),t.$emit("refreshTable")})).catch((function(t){console.log(t)})),t.content="",t.form.resetFields(),t.drawerVisible=!1,t.$emit("resetData",!1)}}))},handleEdit:function(t){var e=this;this.id=t.id,n.a.get(t.id).then((function(t){var r=t.model;console.log(r),e.tagsList=r.tagsList,e.content=r.content,null!==r.thumbnail&&void 0!==r.thumbnail&&(e.fileList[0]={uid:"-1",name:"xxx.png",status:"done",url:r.thumbnail});var o=[];void 0!==r.tagsList&&null!==r.tagsList&&r.tagsList.forEach((function(t,e){o[e]=String(t.id)})),e.form.resetFields(),e.form=e.$form.createForm(e,{onFieldsChange:function(t,e){},mapPropsToFields:function(){return{title:e.$form.createFormField({value:r.title}),thumbnail:e.$form.createFormField({value:r.thumbnail}),content:e.$form.createFormField({value:r.content}),isComment:e.$form.createFormField({value:r.isComment}),categoryId:e.$form.createFormField({value:0===r.categoryId||void 0===r.categoryId?"":r.categoryId+""}),weight:e.$form.createFormField({value:r.weight}),tagsList:e.$form.createFormField({value:o})}},onValuesChange:function(t,e){console.log(e)}})})).catch((function(t){console.log(t)})),this.drawerVisible=!0}}},f=(r(800),r(23)),v=r(801),component=Object(f.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("a-card",{attrs:{bordered:!1}},[r("a-form",{staticClass:"form",attrs:{form:t.form},on:{submit:t.handleSubmit}},[r("a-row",{staticClass:"form-row",attrs:{gutter:16}},[r("a-col",{attrs:{lg:24,md:12,sm:24}},[r("a-form-item",{attrs:{label:"标题"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"请输入文章标题",whitespace:!0}]}],expression:"['title', { rules: [{ required: true, message: '请输入文章标题', whitespace: true }] }]"}],attrs:{placeholder:"请输入文章标题"}})],1)],1)],1),t._v(" "),r("a-row",{staticClass:"form-row",attrs:{gutter:16}},[r("a-col",{attrs:{lg:8,md:12,sm:24}},[r("a-form-item",{attrs:{label:"允许评论"}},[r("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["isComment",{initialValue:1}],expression:"['isComment', { initialValue: 1 }]"}]},[r("a-radio",{attrs:{value:1}},[t._v("是")]),t._v(" "),r("a-radio",{attrs:{value:0}},[t._v("否")])],1)],1)],1),t._v(" "),r("a-col",{attrs:{lg:8,md:12,sm:24}},[r("a-form-item",{attrs:{label:"同步byteblogs"}},[r("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["isPublishByteBlogs",{initialValue:1}],expression:"['isPublishByteBlogs', { initialValue: 1 }]"}]},[r("a-radio",{attrs:{value:1}},[t._v("是")]),t._v(" "),r("a-radio",{attrs:{value:0}},[t._v("否")])],1)],1)],1)],1),t._v(" "),r("a-row",{staticClass:"form-row",attrs:{gutter:16}},[r("a-col",{attrs:{lg:8,md:12,sm:24}},[r("a-form-item",{attrs:{label:"分类"}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["categoryId"],expression:"['categoryId']"}],staticStyle:{width:"200px"},attrs:{size:"default"},on:{change:t.handleSelectChange}},t._l(t.categoryList,(function(e){return r("a-select-option",{key:String(e.id),attrs:{value:String(e.id)}},[t._v("\n              "+t._s(e.name)+"\n            ")])})),1)],1)],1),t._v(" "),r("a-col",{attrs:{lg:8,md:12,sm:24}},[r("a-form-item",{attrs:{label:"标签"}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["tagsList"],expression:"['tagsList']"}],staticStyle:{width:"100%"},attrs:{mode:"tags",maxTagCount:t.tagsSize,placeholder:"请选择标签"},on:{change:t.handleSelectChange}},t._l(t.dynamicTags,(function(e){return r("a-select-option",{key:String(e.id),attrs:{value:String(e.id)}},[t._v("\n              "+t._s(e.name)+"\n            ")])})),1)],1)],1),t._v(" "),r("a-col",{attrs:{lg:8,md:12,sm:24}},[r("a-form-item",{attrs:{label:"权重"}},[r("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["weight",{initialValue:1}],expression:"['weight', { initialValue: 1 }]"}],attrs:{id:"inputNumber",min:1,max:500}})],1)],1)],1),t._v(" "),r("a-row",{staticClass:"form-row",attrs:{gutter:16}},[r("a-row",{staticClass:"form-row",attrs:{gutter:16}},[r("a-col",{attrs:{lg:24,md:12,sm:24}},[r("a-form-item",{attrs:{label:"封面图"}},[r("a-upload",{directives:[{name:"decorator",rawName:"v-decorator",value:["thumbnail"],expression:"['thumbnail']"}],attrs:{action:"/api/blog/file/file/v1/upload/",listType:"picture-card",fileList:t.fileList},on:{preview:t.handlePreview,change:t.handleChange}},[t.fileList.length<1?r("div",[r("a-icon",{attrs:{type:"plus"}}),t._v(" "),r("div",{staticClass:"ant-upload-text"},[t._v("Upload")])],1):t._e()]),t._v(" "),r("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:t.handleCancel}},[r("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImage}})])],1)],1)],1),t._v(" "),r("a-row",{staticClass:"form-row",attrs:{gutter:16}},[r("a-col",{attrs:{lg:24,md:12,sm:24}},[r("a-form-item",{attrs:{label:"内容"}},[r("MavonEditor",{ref:"md",staticStyle:{height:"835px","z-index":"5"},attrs:{ishljs:!0,toolbars:t.markdownOption,"box-shadow":!1,subfield:!1,placeholder:"开始你的表演"},on:{imgAdd:t.$imgAdd},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)],1)],1)],1),t._v(" "),r("div",{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right",zIndex:"10"}},[r("a-button",{style:{marginRight:"8px"},on:{click:t.onClose}},[t._v(" 取消 ")]),t._v(" "),r("a-button",{attrs:{type:"primary"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.handleSubmit(e)}}},[t._v(" 提交 ")])],1)],1)],1)}),[],!1,null,null,null);"function"==typeof v.default&&Object(v.default)(component);e.default=component.exports}}]);